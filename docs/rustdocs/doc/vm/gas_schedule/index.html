<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `gas_schedule` mod in crate `vm`."><meta name="keywords" content="rust, rustlang, rust-lang, gas_schedule"><title>vm::gas_schedule - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../vm/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Module gas_schedule</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'><a href='../index.html'>vm</a></p><script>window.sidebarCurrent = {name: 'gas_schedule', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/vm/gas_schedule.rs.html#4-446' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../index.html'>vm</a>::<wbr><a class="mod" href=''>gas_schedule</a></span></h1><div class='docblock'><p>This module lays out the basic abstract costing schedule for bytecode instructions.</p>
<p>It is important to note that the cost schedule defined in this file does not track hashing
operations or other native operations; the cost of each native operation will be returned by the
native function itself.</p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.AbstractMemorySize.html" title='vm::gas_schedule::AbstractMemorySize struct'>AbstractMemorySize</a></td><td class='docblock-short'><p>A newtype wrapper that represents the (abstract) memory size that the instruciton will take up.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.CONST_SIZE.html" title='vm::gas_schedule::CONST_SIZE struct'>CONST_SIZE</a></td><td class='docblock-short'><p>The size in words for a non-string or address constant on the stack</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.CostTable.html" title='vm::gas_schedule::CostTable struct'>CostTable</a></td><td class='docblock-short'><p>The cost tables, keyed by the serialized form of the bytecode instruction.  We use the
serialized form as opposed to the instruction enum itself as the key since this will be the
on-chain representation of bytecode instructions in the future.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.DEFAULT_ACCOUNT_SIZE.html" title='vm::gas_schedule::DEFAULT_ACCOUNT_SIZE struct'>DEFAULT_ACCOUNT_SIZE</a></td><td class='docblock-short'><p>For V1 all accounts will be 32 words</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.GAS_SCHEDULE_NAME.html" title='vm::gas_schedule::GAS_SCHEDULE_NAME struct'>GAS_SCHEDULE_NAME</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.GLOBAL_MEMORY_PER_BYTE_COST.html" title='vm::gas_schedule::GLOBAL_MEMORY_PER_BYTE_COST struct'>GLOBAL_MEMORY_PER_BYTE_COST</a></td><td class='docblock-short'><p>The cost per-byte written to global storage.
TODO: Fill this in with a proper number once it's determined.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.GLOBAL_MEMORY_PER_BYTE_WRITE_COST.html" title='vm::gas_schedule::GLOBAL_MEMORY_PER_BYTE_WRITE_COST struct'>GLOBAL_MEMORY_PER_BYTE_WRITE_COST</a></td><td class='docblock-short'><p>The cost per-byte written to storage.
TODO: Fill this in with a proper number once it's determined.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.GasCost.html" title='vm::gas_schedule::GasCost struct'>GasCost</a></td><td class='docblock-short'><p>The  <code>GasCost</code> tracks:</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.GasPrice.html" title='vm::gas_schedule::GasPrice struct'>GasPrice</a></td><td class='docblock-short'><p>A newtype wrapper around the gas price for each unit of gas consumed.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.GasUnits.html" title='vm::gas_schedule::GasUnits struct'>GasUnits</a></td><td class='docblock-short'><p>A newtype wrapper around the underlying carrier for the gas cost.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.INTRINSIC_GAS_PER_BYTE.html" title='vm::gas_schedule::INTRINSIC_GAS_PER_BYTE struct'>INTRINSIC_GAS_PER_BYTE</a></td><td class='docblock-short'><p>The units of gas that should be charged per byte for every transaction.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.LARGE_TRANSACTION_CUTOFF.html" title='vm::gas_schedule::LARGE_TRANSACTION_CUTOFF struct'>LARGE_TRANSACTION_CUTOFF</a></td><td class='docblock-short'><p>Any transaction over this size will be charged <code>INTRINSIC_GAS_PER_BYTE</code> per byte</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.MAXIMUM_NUMBER_OF_GAS_UNITS.html" title='vm::gas_schedule::MAXIMUM_NUMBER_OF_GAS_UNITS struct'>MAXIMUM_NUMBER_OF_GAS_UNITS</a></td><td class='docblock-short'><p>1 nanosecond should equal one unit of computational gas. We bound the maximum
computational time of any given transaction at 10 milliseconds. We want this number and
<code>MAX_PRICE_PER_GAS_UNIT</code> to always satisfy the inequality that
MAXIMUM_NUMBER_OF_GAS_UNITS * MAX_PRICE_PER_GAS_UNIT &lt; min(u64::MAX, GasUnits<GasCarrier>::MAX)</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.MAX_ABSTRACT_MEMORY_SIZE.html" title='vm::gas_schedule::MAX_ABSTRACT_MEMORY_SIZE struct'>MAX_ABSTRACT_MEMORY_SIZE</a></td><td class='docblock-short'><p>The maximum size representable by AbstractMemorySize</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.MAX_PRICE_PER_GAS_UNIT.html" title='vm::gas_schedule::MAX_PRICE_PER_GAS_UNIT struct'>MAX_PRICE_PER_GAS_UNIT</a></td><td class='docblock-short'><p>The maximum gas unit price that a transaction can be submitted with.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.MIN_PRICE_PER_GAS_UNIT.html" title='vm::gas_schedule::MIN_PRICE_PER_GAS_UNIT struct'>MIN_PRICE_PER_GAS_UNIT</a></td><td class='docblock-short'><p>The minimum gas price that a transaction can be submitted with.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.MIN_TRANSACTION_GAS_UNITS.html" title='vm::gas_schedule::MIN_TRANSACTION_GAS_UNITS struct'>MIN_TRANSACTION_GAS_UNITS</a></td><td class='docblock-short'><p>We charge one unit of gas per-byte for the first 600 bytes</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.REFERENCE_SIZE.html" title='vm::gas_schedule::REFERENCE_SIZE struct'>REFERENCE_SIZE</a></td><td class='docblock-short'><p>The size in words for a reference on the stack</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.STRUCT_SIZE.html" title='vm::gas_schedule::STRUCT_SIZE struct'>STRUCT_SIZE</a></td><td class='docblock-short'><p>The size of a struct in words</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.WORD_SIZE.html" title='vm::gas_schedule::WORD_SIZE struct'>WORD_SIZE</a></td><td class='docblock-short'><p>The word size that we charge by</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.GasAlgebra.html" title='vm::gas_schedule::GasAlgebra trait'>GasAlgebra</a></td><td class='docblock-short'><p>A trait encoding the operations permitted on the underlying carrier for the gas unit, and how
other gas-related units can interact with other units -- operations can only be performed
across units with the same underlying carrier (i.e. as long as the underlying data is
the same).</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.calculate_intrinsic_gas.html" title='vm::gas_schedule::calculate_intrinsic_gas fn'>calculate_intrinsic_gas</a></td><td class='docblock-short'><p>Calculate the intrinsic gas for the transaction based upon its size in bytes/words.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.instruction_key.html" title='vm::gas_schedule::instruction_key fn'>instruction_key</a></td><td class='docblock-short'><p>The encoding of the instruction is the serialized form of it, but disregarding the
serialization of the instruction's argument(s).</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.words_in.html" title='vm::gas_schedule::words_in fn'>words_in</a></td><td class='docblock-short'><p>Computes the number of words rounded up</p>
</td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.GasCarrier.html" title='vm::gas_schedule::GasCarrier type'>GasCarrier</a></td><td class='docblock-short'><p>The underlying carrier for gas-related units and costs. Data with this type should not be
manipulated directly, but instead be manipulated using the newtype wrappers defined around
them and the functions defined in the <code>GasAlgebra</code> trait.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../";window.currentCrate = "vm";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>